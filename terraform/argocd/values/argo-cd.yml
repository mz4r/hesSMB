server:
  extraArgs:
    - --insecure
  service:
    type: ClusterIP
    port: 80
  ingress:
    enabled: false

extraObjects:
  - apiVersion: cert-manager.io/v1
    kind: Certificate
    metadata:
      name: argocd-tls
      namespace: argocd
    spec:
      secretName: argocd-tls
      issuerRef:
        name: local-pki-issuer
        kind: ClusterIssuer
      commonName: argocd.mz4.re
      dnsNames:
        - argocd.mz4.re

  - apiVersion: traefik.io/v1alpha1
    kind: IngressRoute
    metadata:
      name: argocd-server
      namespace: argocd
    spec:
      entryPoints:
        - websecure
      routes:
      - match: Host(`argocd.mz4.re`)
        kind: Rule
        services:
        - name: argocd-server
          port: 80
      tls:
        secretName: argocd-tls